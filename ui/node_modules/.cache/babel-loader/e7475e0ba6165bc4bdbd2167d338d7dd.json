{"ast":null,"code":"import { XlsxRead, XlsxJson } from \"../../node_modules/vue3-xlsx/dist/vue3-xlsx.cjs.prod.js\";\nimport readXlsxFile from 'read-excel-file';\nimport axios from 'axios';\nexport default {\n  components: {\n    XlsxRead,\n    XlsxJson\n  },\n\n  data() {\n    return {\n      file: null,\n      collection: null,\n      guests: [],\n      ids: []\n    };\n  },\n\n  mounted() {\n    axios.get('http://127.0.0.1:8000/guests/').then(response => {\n      this.guests = response.data;\n      this.len = this.guests.length;\n      this.guests.forEach(element => {\n        this.ids.push(element.id);\n      });\n      console.log(this.ids);\n    });\n  },\n\n  methods: {\n    onChange(event) {\n      this.file = event.target.files ? event.target.files[0] : null;\n      readXlsxFile(this.file).then(rows => {\n        console.log(\"rows:\", rows);\n        const gosti = [];\n\n        for (let index = 1; index < rows.length; index++) {\n          const element = rows[index];\n          console.log(element);\n          const obj = {};\n          obj[\"name\"] = \"\";\n          obj[\"id\"] = \"\";\n          obj[\"surname\"] = \"\";\n          obj[\"jmbag\"] = \"\";\n          obj[\"email\"] = \"\";\n          obj[\"tag\"] = \"\";\n          obj[\"bought\"] = \"\";\n          obj[\"entered\"] = \"\";\n\n          for (let indexy = 0; indexy < rows[0].length; indexy++) {\n            obj[rows[0][indexy]] = element[indexy];\n          }\n\n          var nextId;\n\n          for (let index = 0; index < this.ids.length; index++) {\n            if (this.ids.includes(String(index)) == false) {\n              nextId = index;\n              break;\n            }\n          }\n\n          if (nextId == '') {\n            nextId = ids.length;\n          }\n\n          obj[\"id\"] = nextId;\n          this.ids.push(String(nextId));\n          axios.post('http://127.0.0.1:8000/guests/', {\n            id: obj.id,\n            name: obj.name,\n            surname: obj.surname,\n            jmbag: obj.jmbag,\n            tag: obj.selectedTag,\n            bought: obj.bought,\n            entered: obj.entered\n          }, {\n            auth: {\n              username: 'paxx',\n              password: 'KSETpenisica43'\n            }\n          });\n          gosti.push(obj);\n        }\n\n        console.log(gosti);\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["XlsxRead","XlsxJson","readXlsxFile","axios","components","data","file","collection","guests","ids","mounted","get","then","response","len","length","forEach","element","push","id","console","log","methods","onChange","event","target","files","rows","gosti","index","obj","indexy","nextId","includes","String","post","name","surname","jmbag","tag","selectedTag","bought","entered","auth","username","password"],"sourceRoot":"","sources":["C:\\brucifer-karte\\brucifer-karte\\bfk2\\brucifer-karte\\ui\\src\\views\\ImportView.vue"],"sourcesContent":["<template>\r\n  <div class=\"import\">\r\n    <br>\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-md-8\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">Import</div>\r\n          <div class=\"card-body\">\r\n            <section>\r\n              <input type=\"file\" @change=\"onChange\" />\r\n            </section>\r\n            <section>\r\n              <br>\r\n              <h1>Prvi stupac mora sadr≈æavati imena polja koja moraju biti lowercase</h1>\r\n            </section>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport { XlsxRead, XlsxJson } from \"../../node_modules/vue3-xlsx/dist/vue3-xlsx.cjs.prod.js\";\r\nimport readXlsxFile from 'read-excel-file';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  components: {\r\n    XlsxRead,\r\n    XlsxJson\r\n  },\r\n  data() {\r\n    return {\r\n      file: null,\r\n      collection: null,\r\n      guests: [],\r\n      ids: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    axios.get('http://127.0.0.1:8000/guests/',)\r\n      .then(response => {\r\n        this.guests = response.data;\r\n        this.len = this.guests.length;\r\n        \r\n        this.guests.forEach(element => {\r\n          this.ids.push(element.id);\r\n        });\r\n        console.log(this.ids);\r\n      })\r\n  },\r\n  methods: {\r\n    onChange(event) {\r\n      this.file = event.target.files ? event.target.files[0] : null;\r\n      readXlsxFile(this.file).then((rows) => {\r\n        console.log(\"rows:\", rows)\r\n\r\n        const gosti = [];\r\n\r\n        for (let index = 1; index < rows.length; index++) {\r\n            const element = rows[index];\r\n\r\n            console.log(element);\r\n            const obj={};\r\n            obj[\"name\"]=\"\";\r\n            obj[\"id\"]=\"\";\r\n            obj[\"surname\"]=\"\";\r\n            obj[\"jmbag\"]=\"\";\r\n            obj[\"email\"]=\"\";\r\n            obj[\"tag\"]=\"\";\r\n            obj[\"bought\"]=\"\";\r\n            obj[\"entered\"]=\"\";\r\n\r\n            for(let indexy = 0; indexy < rows[0].length; indexy++) {\r\n              obj[rows[0][indexy]] = element[indexy];\r\n            }\r\n\r\n            var nextId;\r\n\r\n            for (let index = 0; index < this.ids.length; index++) {\r\n              if (this.ids.includes(String(index)) == false) {\r\n                nextId = index;\r\n                break;\r\n              }\r\n            }\r\n            if (nextId == '') {\r\n              nextId = ids.length;\r\n            }\r\n\r\n            obj[\"id\"]=nextId;\r\n            this.ids.push(String(nextId));\r\n            axios.post('http://127.0.0.1:8000/guests/',\r\n              { id: obj.id, name: obj.name, surname: obj.surname, jmbag: obj.jmbag, tag: obj.selectedTag, bought: obj.bought, entered: obj.entered },\r\n              { auth: { username: 'paxx', password: 'KSETpenisica43' } }\r\n            )\r\n\r\n            gosti.push(obj);\r\n        }\r\n\r\n        console.log(gosti);\r\n        \r\n        \r\n\r\n      })\r\n\r\n\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]},"metadata":{},"sourceType":"module"}