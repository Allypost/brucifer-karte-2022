{"ast":null,"code":"import { XlsxRead, XlsxJson } from \"../../node_modules/vue3-xlsx/dist/vue3-xlsx.cjs.prod.js\";\nimport readXlsxFile from 'read-excel-file';\nimport axios from 'axios';\nexport default {\n  components: {\n    XlsxRead,\n    XlsxJson\n  },\n\n  data() {\n    return {\n      file: null,\n      collection: null,\n      guests: [],\n      ids: []\n    };\n  },\n\n  mounted() {\n    axios.get('http://127.0.0.1:8000/guests/').then(response => {\n      this.guests = response.data;\n      this.len = this.guests.length;\n      this.guests.forEach(element => {\n        this.ids.push(element.id);\n      });\n    });\n  },\n\n  methods: {\n    onChange(event) {\n      this.file = event.target.files ? event.target.files[0] : null;\n      readXlsxFile(this.file).then(rows => {\n        console.log(\"rows:\", rows);\n\n        if (rows[0][0] == \"jmbag\") {\n          for (let index = 1; index < rows.length; index++) {\n            const element = rows[index][0];\n\n            for (let index = 0; index < ids.length; index++) {\n              if (ids.includes(String(index)) == false) {\n                this.nextId = index;\n                break;\n              }\n            }\n\n            if (this.nextId == '') {\n              this.nextId = ids.length;\n            }\n\n            console.log(this.nextId);\n            console.log(element);\n            axios.post('http://127.0.0.1:8000/guests/', {\n              id: this.nextId,\n              jmbag: element,\n              tag: \"Brucoši\",\n              bought: '0',\n              entered: '0'\n            }, {\n              auth: {\n                username: 'paxx',\n                password: 'KSETpenisica43'\n              }\n            });\n          }\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA4BA,SAASA,QAAT,EAAmBC,QAAnB,QAAmC,yDAAnC;AACA,OAAOC,YAAP,MAAyB,iBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe;EACbC,UAAU,EAAE;IACVJ,QADU;IAEVC;EAFU,CADC;;EAKbI,IAAI,GAAG;IACL,OAAO;MACLC,IAAI,EAAE,IADD;MAELC,UAAU,EAAE,IAFP;MAGLC,MAAM,EAAE,EAHH;MAILC,GAAG,EAAE;IAJA,CAAP;EAMD,CAZY;;EAabC,OAAO,GAAG;IACRP,KAAK,CAACQ,GAAN,CAAU,+BAAV,EACGC,IADH,CACQC,QAAO,IAAK;MAChB,KAAKL,MAAL,GAAcK,QAAQ,CAACR,IAAvB;MACA,KAAKS,GAAL,GAAW,KAAKN,MAAL,CAAYO,MAAvB;MAEA,KAAKP,MAAL,CAAYQ,OAAZ,CAAoBC,OAAM,IAAK;QAC7B,KAAKR,GAAL,CAASS,IAAT,CAAcD,OAAO,CAACE,EAAtB;MACD,CAFD;IAGD,CARH;EASD,CAvBY;;EAwBbC,OAAO,EAAE;IACPC,QAAQ,CAACC,KAAD,EAAQ;MACd,KAAKhB,IAAL,GAAYgB,KAAK,CAACC,MAAN,CAAaC,KAAb,GAAqBF,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAArB,GAA6C,IAAzD;MACAtB,YAAY,CAAC,KAAKI,IAAN,CAAZ,CAAwBM,IAAxB,CAA8Ba,IAAD,IAAU;QACrCC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,IAArB;;QACA,IAAIA,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,KAAc,OAAlB,EAA2B;UACzB,KAAK,IAAIG,KAAI,GAAI,CAAjB,EAAoBA,KAAI,GAAIH,IAAI,CAACV,MAAjC,EAAyCa,KAAK,EAA9C,EAAkD;YAChD,MAAMX,OAAM,GAAIQ,IAAI,CAACG,KAAD,CAAJ,CAAY,CAAZ,CAAhB;;YAGA,KAAK,IAAIA,KAAI,GAAI,CAAjB,EAAoBA,KAAI,GAAInB,GAAG,CAACM,MAAhC,EAAwCa,KAAK,EAA7C,EAAiD;cAC/C,IAAInB,GAAG,CAACoB,QAAJ,CAAaC,MAAM,CAACF,KAAD,CAAnB,KAA+B,KAAnC,EAA0C;gBACxC,KAAKG,MAAL,GAAcH,KAAd;gBACA;cACF;YACF;;YACA,IAAI,KAAKG,MAAL,IAAe,EAAnB,EAAuB;cACrB,KAAKA,MAAL,GAActB,GAAG,CAACM,MAAlB;YACF;;YACAW,OAAO,CAACC,GAAR,CAAY,KAAKI,MAAjB;YACAL,OAAO,CAACC,GAAR,CAAYV,OAAZ;YACAd,KAAK,CAAC6B,IAAN,CAAW,+BAAX,EACE;cAAEb,EAAE,EAAE,KAAKY,MAAX;cAAmBE,KAAK,EAAEhB,OAA1B;cAAmCiB,GAAG,EAAE,SAAxC;cAAmDC,MAAM,EAAE,GAA3D;cAAgEC,OAAO,EAAE;YAAzE,CADF,EAEE;cAAEC,IAAI,EAAE;gBAAEC,QAAQ,EAAE,MAAZ;gBAAoBC,QAAQ,EAAE;cAA9B;YAAR,CAFF;UAOF;QACF;MAED,CA5BD;IA+BD;;EAlCM;AAxBI,CAAf","names":["XlsxRead","XlsxJson","readXlsxFile","axios","components","data","file","collection","guests","ids","mounted","get","then","response","len","length","forEach","element","push","id","methods","onChange","event","target","files","rows","console","log","index","includes","String","nextId","post","jmbag","tag","bought","entered","auth","username","password"],"sourceRoot":"","sources":["C:\\brucifer-karte\\brucifer-karte\\bfk2\\brucifer-karte\\ui\\src\\views\\ImportView.vue"],"sourcesContent":["<template>\r\n  <div class=\"import\">\r\n    <br>\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-md-8\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">Import</div>\r\n          <div class=\"card-body\">\r\n            <section>\r\n              <input type=\"file\" @change=\"onChange\" />\r\n              <xlsx-read :file=\"file\">\r\n                <xlsx-json :sheet=\"selectedSheet\">\r\n                  <template #default=\"{ collection }\">\r\n                    <div>\r\n                      {{ collection }}\r\n                    </div>\r\n                  </template>\r\n                </xlsx-json>\r\n              </xlsx-read>\r\n            </section>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport { XlsxRead, XlsxJson } from \"../../node_modules/vue3-xlsx/dist/vue3-xlsx.cjs.prod.js\";\r\nimport readXlsxFile from 'read-excel-file';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  components: {\r\n    XlsxRead,\r\n    XlsxJson\r\n  },\r\n  data() {\r\n    return {\r\n      file: null,\r\n      collection: null,\r\n      guests: [],\r\n      ids: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    axios.get('http://127.0.0.1:8000/guests/',)\r\n      .then(response => {\r\n        this.guests = response.data;\r\n        this.len = this.guests.length;\r\n        \r\n        this.guests.forEach(element => {\r\n          this.ids.push(element.id);\r\n        });\r\n      })\r\n  },\r\n  methods: {\r\n    onChange(event) {\r\n      this.file = event.target.files ? event.target.files[0] : null;\r\n      readXlsxFile(this.file).then((rows) => {\r\n        console.log(\"rows:\", rows)\r\n        if (rows[0][0] == \"jmbag\") {\r\n          for (let index = 1; index < rows.length; index++) {\r\n            const element = rows[index][0];\r\n\r\n\r\n            for (let index = 0; index < ids.length; index++) {\r\n              if (ids.includes(String(index)) == false) {\r\n                this.nextId = index;\r\n                break;\r\n              }\r\n            }\r\n            if (this.nextId == '') {\r\n              this.nextId = ids.length;\r\n            }\r\n            console.log(this.nextId);\r\n            console.log(element);\r\n            axios.post('http://127.0.0.1:8000/guests/',\r\n              { id: this.nextId, jmbag: element, tag: \"Brucoši\", bought: '0', entered: '0' },\r\n              { auth: { username: 'paxx', password: 'KSETpenisica43' } }\r\n            )\r\n\r\n\r\n\r\n          }\r\n        }\r\n\r\n      })\r\n\r\n\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]},"metadata":{},"sourceType":"module"}