{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"import\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_3 = {\n  class: \"row justify-content-center\"\n};\nconst _hoisted_4 = {\n  class: \"col-md-8\"\n};\nconst _hoisted_5 = {\n  class: \"card\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"card-header\"\n}, \"Import\", -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  class: \"card-body\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"section\", null, [/*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createElementVNode(\"h1\", null, \"Prvi redak mora sadr탑avati imena polja koja moraju biti lowercase\"), /*#__PURE__*/_createElementVNode(\"h1\", null, \"Imena polja mogu biti: name surname jmbag email tag bought enetered\"), /*#__PURE__*/_createElementVNode(\"h1\", null, \"Tablica ne mora sadr탑avati sva imena polja, redoslijed stupaca nije bitan\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn btn-primary\",\n  href: \"../assets/import_example.xlsx\",\n  download: \"import_example.xlsx\"\n}, \"Download example\")], -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"section\", null, [_createElementVNode(\"input\", {\n    class: \"btn btn-primary\",\n    type: \"file\",\n    onChange: _cache[0] || (_cache[0] = function () {\n      return $options.onChange && $options.onChange(...arguments);\n    })\n  }, null, 32\n  /* HYDRATE_EVENTS */\n  )]), _hoisted_8])])])])]);\n}","map":{"version":3,"mappings":";;EACOA,KAAK,EAAC;;;gCACTC,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI;AAAA;AAAJ;;;EACKD,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;gCACTC,oBAAqC,KAArC,EAAqC;EAAhCD,KAAK,EAAC;AAA0B,CAArC,EAAyB,QAAzB,EAA+B;AAAA;AAA/B;;;EACKA,KAAK,EAAC;;;gCAITC,oBAOU,SAPV,EAOU,IAPV,EAOU,cANRA,oBAAI,IAAJ,CAMQ,eALRA,oBAA0E,IAA1E,EAA0E,IAA1E,EAAI,mEAAJ,CAKQ,eAJRA,oBAA4E,IAA5E,EAA4E,IAA5E,EAAI,qEAAJ,CAIQ,eAHRA,oBAAkF,IAAlF,EAAkF,IAAlF,EAAI,2EAAJ,CAGQ,eAFRA,oBAAI,IAAJ,CAEQ,eADRA,oBAA+H,QAA/H,EAA+H;EAAvHD,KAAK,EAAG,iBAA+G;EAA7FE,IAAI,EAAC,+BAAwF;EAAxDC,QAAQ,EAAC;AAA+C,CAA/H,EAAsG,kBAAtG,CACQ,CAPV;;AAAA;;;uBAVVC,oBAsBM,KAtBN,cAsBM,CArBJC,UAqBI,EApBJJ,oBAmBM,KAnBN,cAmBM,CAlBJA,oBAiBM,KAjBN,cAiBM,CAhBJA,oBAeM,KAfN,cAeM,CAdJK,UAcI,EAbJL,oBAYM,KAZN,cAYM,CAXJA,oBAEU,SAFV,EAEU,IAFV,EAEU,CADRA,oBAAkE,OAAlE,EAAkE;IAA3DD,KAAK,EAAG,iBAAmD;IAAjCO,IAAI,EAAC,MAA4B;IAApBC,QAAM;MAAA,OAAEC,oDAAF;IAAA;EAAc,CAAlE;;EAAA,CACQ,CAFV,CAWI,EARJC,UAQI,CAZN,CAaI,CAfN,CAgBI,CAjBN,CAkBI,CAnBN,CAoBI,CAtBN","names":["class","_createElementVNode","href","download","_createElementBlock","_hoisted_2","_hoisted_6","type","onChange","$options","_hoisted_8"],"sourceRoot":"","sources":["C:\\brucifer-karte\\brucifer-karte\\bfk2\\brucifer-karte\\ui\\src\\views\\ImportView.vue"],"sourcesContent":["<template>\r\n  <div class=\"import\">\r\n    <br>\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-md-8\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">Import</div>\r\n          <div class=\"card-body\">\r\n            <section>\r\n              <input class = \"btn btn-primary\" type=\"file\" @change=\"onChange\" />\r\n            </section>\r\n            <section>\r\n              <br>\r\n              <h1>Prvi redak mora sadr탑avati imena polja koja moraju biti lowercase</h1>\r\n              <h1>Imena polja mogu biti: name surname jmbag email tag bought enetered</h1>\r\n              <h1>Tablica ne mora sadr탑avati sva imena polja, redoslijed stupaca nije bitan</h1>\r\n              <br>\r\n              <button class = \"btn btn-primary\" href=\"../assets/import_example.xlsx\" download=\"import_example.xlsx\">Download example</button>\r\n            </section>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport { XlsxRead, XlsxJson } from \"../../node_modules/vue3-xlsx/dist/vue3-xlsx.cjs.prod.js\";\r\nimport readXlsxFile from 'read-excel-file';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  components: {\r\n    XlsxRead,\r\n    XlsxJson\r\n  },\r\n  data() {\r\n    return {\r\n      file: null,\r\n      collection: null,\r\n      guests: [],\r\n      ids: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    axios.get('http://127.0.0.1:8000/guests/',)\r\n      .then(response => {\r\n        this.guests = response.data;\r\n        this.len = this.guests.length;\r\n        \r\n        this.guests.forEach(element => {\r\n          this.ids.push(element.id);\r\n        });\r\n        console.log(this.ids);\r\n      })\r\n  },\r\n  methods: {\r\n    onChange(event) {\r\n      this.file = event.target.files ? event.target.files[0] : null;\r\n      readXlsxFile(this.file).then((rows) => {\r\n        console.log(\"rows:\", rows)\r\n\r\n        const gosti = [];\r\n\r\n        for (let index = 1; index < rows.length; index++) {\r\n            const element = rows[index];\r\n\r\n            console.log(element);\r\n            const obj={};\r\n            obj[\"name\"]=\"\";\r\n            obj[\"id\"]=\"\";\r\n            obj[\"surname\"]=\"\";\r\n            obj[\"jmbag\"]=\"\";\r\n            obj[\"email\"]=\"\";\r\n            obj[\"tag\"]=\"\";\r\n            obj[\"bought\"]=\"\";\r\n            obj[\"entered\"]=\"\";\r\n\r\n            for(let indexy = 0; indexy < rows[0].length; indexy++) {\r\n              obj[rows[0][indexy]] = element[indexy];\r\n            }\r\n\r\n            var nextId;\r\n\r\n            for (let index = 0; index < this.ids.length; index++) {\r\n              if (this.ids.includes(String(index)) == false) {\r\n                nextId = index;\r\n                break;\r\n              }\r\n            }\r\n            if (nextId == '') {\r\n              nextId = ids.length;\r\n            }\r\n\r\n            obj[\"id\"]=nextId;\r\n            this.ids.push(String(nextId));\r\n            axios.post('http://127.0.0.1:8000/guests/',\r\n              { id: obj.id, name: obj.name, surname: obj.surname, jmbag: obj.jmbag, tag: obj.selectedTag, bought: obj.bought, entered: obj.entered },\r\n              { auth: { username: 'paxx', password: 'KSETpenisica43' } }\r\n            )\r\n\r\n            gosti.push(obj);\r\n        }\r\n\r\n        console.log(gosti);\r\n        \r\n        \r\n\r\n      })\r\n\r\n\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]},"metadata":{},"sourceType":"module"}