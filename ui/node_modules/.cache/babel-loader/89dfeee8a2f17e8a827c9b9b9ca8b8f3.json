{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport axios from 'axios';\nimport VueJwtDecode from 'vue-jwt-decode';\nexport default {\n  components: {},\n\n  data() {\n    return {\n      resp: ''\n    };\n  },\n\n  methods: {\n    handleCredentialResponse(res) {\n      const responsePayload = VueJwtDecode.decode(res.credential);\n      console.log(\"ID: \" + responsePayload.sub);\n      console.log('Full Name: ' + responsePayload.name);\n      console.log('Given Name: ' + responsePayload.given_name);\n      console.log('Family Name: ' + responsePayload.family_name);\n      console.log(\"Image URL: \" + responsePayload.picture);\n      console.log(\"Email: \" + responsePayload.email);\n      axios.get('http://127.0.0.1:8000/users/').then(response => {\n        this.users = response.data;\n        var usermails = [];\n        var ids = [];\n        this.users.forEach(element => {\n          usermails.push(element.email);\n          ids.push(element.id);\n        });\n\n        for (let index = 0; index < ids.length; index++) {\n          if (ids.includes(String(index)) == false) {\n            this.nextId = index;\n            break;\n          }\n        }\n\n        if (this.nextId == '') {\n          this.nextId = ids.length;\n        }\n\n        var registeredEmail = false;\n\n        for (let index = 0; index < usermails.length; index++) {\n          if (usermails.includes(responsePayload.email) == true) {\n            registeredEmail = true;\n            break;\n          }\n        }\n\n        console.log(usermails, \"------\", responsePayload.email, \"----\", registeredEmail);\n\n        if (usermails == false) {\n          axios.post('http://127.0.0.1:8000/users/', {\n            id: this.nextId,\n            name: responsePayload.name,\n            email: responsePayload.email,\n            privilege: '0'\n          }, {\n            auth: {\n              username: 'paxx',\n              password: 'KSETpenisica43'\n            }\n          });\n        }\n      });\n    },\n\n    logg() {\n      console.log(CredentialResponse);\n    }\n\n  },\n  mounted: function () {\n    let googleScript = document.createElement('script');\n    googleScript.src = 'https://accounts.google.com/gsi/client';\n    document.head.appendChild(googleScript);\n    window.addEventListener('load', () => {\n      console.log(window.google);\n      window.google.accounts.id.initialize({\n        client_id: \"729300808359-9qt44p6ksjivnbfd981pgjbmkh4ifgcj.apps.googleusercontent.com\",\n        callback: this.handleCredentialResponse\n      });\n      window.google.accounts.id.renderButton(document.getElementById(\"signin_button\"), {\n        theme: \"outline\",\n        size: \"large\"\n      } // customization attributes\n      );\n    });\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","VueJwtDecode","components","data","resp","methods","handleCredentialResponse","res","responsePayload","decode","credential","console","log","sub","name","given_name","family_name","picture","email","get","then","response","users","usermails","ids","forEach","element","push","id","index","length","includes","String","nextId","registeredEmail","post","privilege","auth","username","password","logg","CredentialResponse","mounted","googleScript","document","createElement","src","head","appendChild","window","addEventListener","google","accounts","initialize","client_id","callback","renderButton","getElementById","theme","size"],"sourceRoot":"","sources":["C:\\brucifer-karte\\brucifer-karte\\bfk2\\brucifer\\ui\\src\\views\\LoginView.vue"],"sourcesContent":["<template>\r\n    <div id=\"login\">\r\n        <div id=\"signin_button\"></div>\r\n        <button @click=\"logg\"></button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport VueJwtDecode from 'vue-jwt-decode'\r\nexport default {\r\n    components: {\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            resp: '',\r\n        }\r\n\r\n    },\r\n    methods: {\r\n        handleCredentialResponse(res) {\r\n            const responsePayload = VueJwtDecode.decode(res.credential);\r\n\r\n            console.log(\"ID: \" + responsePayload.sub);\r\n            console.log('Full Name: ' + responsePayload.name);\r\n            console.log('Given Name: ' + responsePayload.given_name);\r\n            console.log('Family Name: ' + responsePayload.family_name);\r\n            console.log(\"Image URL: \" + responsePayload.picture);\r\n            console.log(\"Email: \" + responsePayload.email);\r\n\r\n            axios.get('http://127.0.0.1:8000/users/',)\r\n                .then(response => {\r\n                    this.users = response.data;\r\n                    var usermails = [];\r\n                    var ids = [];\r\n\r\n                    this.users.forEach(element => {\r\n                        usermails.push(element.email);\r\n                        ids.push(element.id);\r\n                    });\r\n                    for (let index = 0; index < ids.length; index++) {\r\n                        if (ids.includes(String(index)) == false) {\r\n                            this.nextId = index;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (this.nextId == '') {\r\n                        this.nextId = ids.length;\r\n                    }\r\n                    var registeredEmail = false;\r\n                    for (let index = 0; index < usermails.length; index++) {\r\n                        if (usermails.includes(responsePayload.email) == true) {\r\n                            registeredEmail = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    console.log(usermails, \"------\", responsePayload.email, \"----\", registeredEmail)\r\n                    if (usermails==false) {\r\n                    axios.post('http://127.0.0.1:8000/users/',\r\n                    { id: this.nextId, name: responsePayload.name, email: responsePayload.email, privilege: '0'},\r\n                    { auth: { username: 'paxx', password: 'KSETpenisica43' } }\r\n                )\r\n            }\r\n                })\r\n\r\n            \r\n\r\n\r\n\r\n        },\r\n        logg() {\r\n\r\n            console.log(CredentialResponse)\r\n        }\r\n\r\n    },\r\n    mounted: function () {\r\n        let googleScript = document.createElement('script');\r\n        googleScript.src = 'https://accounts.google.com/gsi/client';\r\n        document.head.appendChild(googleScript);\r\n\r\n        window.addEventListener('load', () => {\r\n            console.log(window.google);\r\n            window.google.accounts.id.initialize({\r\n                client_id: \"729300808359-9qt44p6ksjivnbfd981pgjbmkh4ifgcj.apps.googleusercontent.com\",\r\n                callback: this.handleCredentialResponse,\r\n\r\n            });\r\n            window.google.accounts.id.renderButton(\r\n                document.getElementById(\"signin_button\"),\r\n                { theme: \"outline\", size: \"large\" }  // customization attributes\r\n            );\r\n        })\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#signin_button {\r\n    text-align: center;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}