{"ast":null,"code":"import { XlsxRead, XlsxJson } from \"../../node_modules/vue3-xlsx/dist/vue3-xlsx.cjs.prod.js\";\nimport readXlsxFile from 'read-excel-file';\nimport axios from 'axios';\nexport default {\n  components: {\n    XlsxRead,\n    XlsxJson\n  },\n\n  data() {\n    return {\n      file: null,\n      collection: null,\n      guests: [],\n      ids: []\n    };\n  },\n\n  mounted() {\n    axios.get('http://127.0.0.1:8000/guests/').then(response => {\n      this.guests = response.data;\n      this.len = this.guests.length;\n      this.guests.forEach(element => {\n        this.ids.push(element.id);\n      });\n      console.log(this.ids);\n    });\n  },\n\n  methods: {\n    onChange(event) {\n      this.file = event.target.files ? event.target.files[0] : null;\n      readXlsxFile(this.file).then(rows => {\n        console.log(\"rows:\", rows);\n        const gosti = [];\n\n        for (let index = 1; index < rows.length; index++) {\n          const element = rows[index];\n          console.log(element);\n        }\n        /*\r\n        if (rows[0][0] == \"jmbag\") {\r\n          for (let index = 1; index < rows.length; index++) {\r\n            const element = rows[index][0];\r\n              var nextId;\r\n              for (let index = 0; index < this.ids.length; index++) {\r\n              if (this.ids.includes(String(index)) == false) {\r\n                nextId = index;\r\n                break;\r\n              }\r\n            }\r\n            if (nextId == '') {\r\n              nextId = ids.length;\r\n            }\r\n              this.ids.push(String(nextId));\r\n            console.log(this.ids);\r\n            console.log(nextId);\r\n            console.log(element);\r\n            axios.post('http://127.0.0.1:8000/guests/',\r\n              { id: nextId, jmbag: element, tag: \"Brucoši\", bought: '0', entered: '0' },\r\n              { auth: { username: 'paxx', password: 'KSETpenisica43' } }\r\n            )\r\n                }\r\n        }*/\n\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA4BA,SAASA,QAAT,EAAmBC,QAAnB,QAAmC,yDAAnC;AACA,OAAOC,YAAP,MAAyB,iBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe;EACbC,UAAU,EAAE;IACVJ,QADU;IAEVC;EAFU,CADC;;EAKbI,IAAI,GAAG;IACL,OAAO;MACLC,IAAI,EAAE,IADD;MAELC,UAAU,EAAE,IAFP;MAGLC,MAAM,EAAE,EAHH;MAILC,GAAG,EAAE;IAJA,CAAP;EAMD,CAZY;;EAabC,OAAO,GAAG;IACRP,KAAK,CAACQ,GAAN,CAAU,+BAAV,EACGC,IADH,CACQC,QAAO,IAAK;MAChB,KAAKL,MAAL,GAAcK,QAAQ,CAACR,IAAvB;MACA,KAAKS,GAAL,GAAW,KAAKN,MAAL,CAAYO,MAAvB;MAEA,KAAKP,MAAL,CAAYQ,OAAZ,CAAoBC,OAAM,IAAK;QAC7B,KAAKR,GAAL,CAASS,IAAT,CAAcD,OAAO,CAACE,EAAtB;MACD,CAFD;MAGAC,OAAO,CAACC,GAAR,CAAY,KAAKZ,GAAjB;IACD,CATH;EAUD,CAxBY;;EAyBba,OAAO,EAAE;IACPC,QAAQ,CAACC,KAAD,EAAQ;MACd,KAAKlB,IAAL,GAAYkB,KAAK,CAACC,MAAN,CAAaC,KAAb,GAAqBF,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAArB,GAA6C,IAAzD;MACAxB,YAAY,CAAC,KAAKI,IAAN,CAAZ,CAAwBM,IAAxB,CAA8Be,IAAD,IAAU;QACrCP,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBM,IAArB;QAEA,MAAMC,KAAI,GAAI,EAAd;;QAEA,KAAK,IAAIC,KAAI,GAAI,CAAjB,EAAoBA,KAAI,GAAIF,IAAI,CAACZ,MAAjC,EAAyCc,KAAK,EAA9C,EAAkD;UAC9C,MAAMZ,OAAM,GAAIU,IAAI,CAACE,KAAD,CAApB;UAEAT,OAAO,CAACC,GAAR,CAAYJ,OAAZ;QAGJ;QAEA;;;;;;;;;;;;;;;;;;;;;;;;;MA+BD,CA5CD;IA+CD;;EAlDM;AAzBI,CAAf","names":["XlsxRead","XlsxJson","readXlsxFile","axios","components","data","file","collection","guests","ids","mounted","get","then","response","len","length","forEach","element","push","id","console","log","methods","onChange","event","target","files","rows","gosti","index"],"sourceRoot":"","sources":["C:\\brucifer-karte\\brucifer-karte\\bfk2\\brucifer-karte\\ui\\src\\views\\ImportView.vue"],"sourcesContent":["<template>\r\n  <div class=\"import\">\r\n    <br>\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-md-8\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">Import</div>\r\n          <div class=\"card-body\">\r\n            <section>\r\n              <input type=\"file\" @change=\"onChange\" />\r\n              <xlsx-read :file=\"file\">\r\n                <xlsx-json :sheet=\"selectedSheet\">\r\n                  <template #default=\"{ collection }\">\r\n                    <div>\r\n                      {{ collection }}\r\n                    </div>\r\n                  </template>\r\n                </xlsx-json>\r\n              </xlsx-read>\r\n            </section>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport { XlsxRead, XlsxJson } from \"../../node_modules/vue3-xlsx/dist/vue3-xlsx.cjs.prod.js\";\r\nimport readXlsxFile from 'read-excel-file';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  components: {\r\n    XlsxRead,\r\n    XlsxJson\r\n  },\r\n  data() {\r\n    return {\r\n      file: null,\r\n      collection: null,\r\n      guests: [],\r\n      ids: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    axios.get('http://127.0.0.1:8000/guests/',)\r\n      .then(response => {\r\n        this.guests = response.data;\r\n        this.len = this.guests.length;\r\n        \r\n        this.guests.forEach(element => {\r\n          this.ids.push(element.id);\r\n        });\r\n        console.log(this.ids);\r\n      })\r\n  },\r\n  methods: {\r\n    onChange(event) {\r\n      this.file = event.target.files ? event.target.files[0] : null;\r\n      readXlsxFile(this.file).then((rows) => {\r\n        console.log(\"rows:\", rows)\r\n\r\n        const gosti = [];\r\n\r\n        for (let index = 1; index < rows.length; index++) {\r\n            const element = rows[index];\r\n\r\n            console.log(element);\r\n\r\n\r\n        }\r\n        \r\n        /*\r\n        if (rows[0][0] == \"jmbag\") {\r\n          for (let index = 1; index < rows.length; index++) {\r\n            const element = rows[index][0];\r\n\r\n            var nextId;\r\n\r\n            for (let index = 0; index < this.ids.length; index++) {\r\n              if (this.ids.includes(String(index)) == false) {\r\n                nextId = index;\r\n                break;\r\n              }\r\n            }\r\n            if (nextId == '') {\r\n              nextId = ids.length;\r\n            }\r\n\r\n            this.ids.push(String(nextId));\r\n            console.log(this.ids);\r\n            console.log(nextId);\r\n            console.log(element);\r\n            axios.post('http://127.0.0.1:8000/guests/',\r\n              { id: nextId, jmbag: element, tag: \"Brucoši\", bought: '0', entered: '0' },\r\n              { auth: { username: 'paxx', password: 'KSETpenisica43' } }\r\n            )\r\n\r\n\r\n\r\n          }\r\n        }*/\r\n\r\n      })\r\n\r\n\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]},"metadata":{},"sourceType":"module"}